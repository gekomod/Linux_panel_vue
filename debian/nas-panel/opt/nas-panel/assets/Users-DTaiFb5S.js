import{_ as I,r as d,c as P,o as b,a as l,w as a,b as s,g as _,h as g,e as T,f as F,z as M,s as w}from"./index-DxMqavst.js";const R={class:"users-container"},S={class:"card-header"},Z={__name:"Users",setup(H){const u=d([{id:1,username:"admin",email:"admin@example.com",role:"admin"},{id:2,username:"user1",email:"user1@example.com",role:"user"},{id:3,username:"user2",email:"user2@example.com",role:"user"}]),c=d({currentPage:1,pageSize:10,total:3}),r=d(!1),i=d(!1),f=d(null),n=d({username:"",email:"",password:"",role:"user"}),z=o=>{i.value=!0,f.value=o.id,n.value={username:o.username,email:o.email,role:o.role},r.value=!0},V=o=>{M.confirm(`Czy na pewno chcesz usunąć użytkownika ${o.username}?`,"Potwierdzenie",{confirmButtonText:"Tak",cancelButtonText:"Anuluj",type:"warning"}).then(()=>{u.value=u.value.filter(e=>e.id!==o.id),w.success("Użytkownik został usunięty")})},U=()=>{if(i.value){const o=u.value.findIndex(e=>e.id===f.value);u.value[o]={...u.value[o],...n.value},w.success("Użytkownik został zaktualizowany")}else{const o={id:u.value.length+1,...n.value};u.value.push(o),w.success("Użytkownik został dodany")}r.value=!1,x()},x=()=>{n.value={username:"",email:"",password:"",role:"user"},i.value=!1,f.value=null},C=o=>{c.value.currentPage=o};return(o,e)=>{const m=s("el-button"),p=s("el-table-column"),E=s("el-table"),j=s("el-pagination"),B=s("el-card"),k=s("el-input"),v=s("el-form-item"),y=s("el-option"),N=s("el-select"),A=s("el-form"),D=s("el-dialog");return b(),P("div",R,[l(B,{class:"box-card"},{header:a(()=>[g("div",S,[e[8]||(e[8]=g("span",null,"Zarządzanie użytkownikami",-1)),l(m,{type:"primary",onClick:e[0]||(e[0]=t=>r.value=!0)},{default:a(()=>e[7]||(e[7]=[_(" Dodaj użytkownika ")])),_:1,__:[7]})])]),default:a(()=>[l(E,{data:u.value,border:"",style:{width:"100%"}},{default:a(()=>[l(p,{prop:"id",label:"ID",width:"80"}),l(p,{prop:"username",label:"Nazwa użytkownika"}),l(p,{prop:"email",label:"Email"}),l(p,{prop:"role",label:"Rola"}),l(p,{label:"Akcje",width:"180"},{default:a(t=>[l(m,{size:"small",onClick:$=>z(t.row)},{default:a(()=>e[9]||(e[9]=[_("Edytuj")])),_:2,__:[9]},1032,["onClick"]),l(m,{size:"small",type:"danger",onClick:$=>V(t.row)},{default:a(()=>e[10]||(e[10]=[_("Usuń")])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(j,{class:"pagination","page-size":c.value.pageSize,total:c.value.total,onCurrentChange:C},null,8,["page-size","total"])]),_:1}),l(D,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value=t),title:i.value?"Edytuj użytkownika":"Dodaj użytkownika"},{footer:a(()=>[l(m,{onClick:e[5]||(e[5]=t=>r.value=!1)},{default:a(()=>e[11]||(e[11]=[_("Anuluj")])),_:1,__:[11]}),l(m,{type:"primary",onClick:U},{default:a(()=>e[12]||(e[12]=[_("Zapisz")])),_:1,__:[12]})]),default:a(()=>[l(A,{model:n.value,"label-width":"120px"},{default:a(()=>[l(v,{label:"Nazwa użytkownika"},{default:a(()=>[l(k,{modelValue:n.value.username,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.username=t)},null,8,["modelValue"])]),_:1}),l(v,{label:"Email"},{default:a(()=>[l(k,{modelValue:n.value.email,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.email=t)},null,8,["modelValue"])]),_:1}),i.value?F("",!0):(b(),T(v,{key:0,label:"Hasło"},{default:a(()=>[l(k,{modelValue:n.value.password,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value.password=t),type:"password"},null,8,["modelValue"])]),_:1})),l(v,{label:"Rola"},{default:a(()=>[l(N,{modelValue:n.value.role,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.role=t),placeholder:"Wybierz rolę"},{default:a(()=>[l(y,{label:"Administrator",value:"admin"}),l(y,{label:"Użytkownik",value:"user"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},q=I(Z,[["__scopeId","data-v-3805cd09"]]);export{q as default};
