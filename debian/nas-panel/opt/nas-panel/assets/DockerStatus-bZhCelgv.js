import{_ as J,r as d,y as j,A as Z,k as H,H as fe,c as Q,o as S,h as o,a as e,G as _e,l as k,I as w,n as le,D as ge,t as z,J as me,q as L,K as ie,b as r,p as oe,w as l,g as x,e as W,F as pe,m as ve,d as ue,f as X,s as $,z as ae,x as ye,L as be}from"./index-DxMqavst.js";const ke={class:"container-stats"},we={class:"controls"},Ce=["disabled"],Ve={class:"switch"},$e=["disabled"],De={class:"slider"},he={key:0,class:"loading"},Se={key:1,class:"error"},Ie={key:2,class:"stats"},xe={class:"stat"},Ue={class:"title"},Fe={class:"values"},Re={class:"main"},Ne={class:"secondary"},Pe={class:"progress-row"},Te={class:"percent"},Le={class:"stat"},Ae={class:"title"},Be={class:"values"},ze={class:"main"},Ee={class:"progress-row"},Me={class:"percent"},Oe={class:"stat"},We={class:"title"},Qe={class:"io"},qe={class:"io-row"},Ke={class:"io-row"},je={class:"stat"},Ge={class:"title"},Ye={class:"io"},Je={class:"io-row"},He={class:"io-row"},Xe={__name:"ContainerStats",props:{containerId:String},emits:["loading","error"],setup(G,{emit:F}){const P=G,v=F,p=d({}),n=d(!0),N=d(!1),A=d(null),m=d(!1);let B=null;const T=j(()=>{if(!p.value.MemUsage)return{};const[D,U]=p.value.MemUsage.split("/").map(h=>h.trim());return{used:D,total:U}}),I=j(()=>{if(!p.value.NetIO)return{};const D=p.value.NetIO.replace(/\n/g,"").trim(),[U,h]=D.split("/").map(g=>g.trim());return{rx:U,tx:h}}),a=j(()=>{if(!p.value.BlockIO)return{};const D=p.value.BlockIO.replace(/\n/g,"").trim(),[U,h]=D.split("/").map(g=>g.trim());return{rx:U,tx:h}}),C=j(()=>{const D=parseFloat(p.value.MemPerc?.replace("%",""))||0;return Math.min(100,Math.max(0,D))}),u=j(()=>{const D=parseFloat(p.value.CPUPerc?.replace("%",""))||0;return Math.min(100,Math.max(0,D))}),t=async()=>{try{v("loading",!0),n.value=!0,A.value=null;const D=await L.get(`/services/docker/stats/container/${P.containerId}`,{params:{stream:m.value},timeout:5e3});p.value=D.data.stats||D.data.rawStats||{},A.value=null,v("error",null)}catch(D){A.value=D.response?.data?.error||"Failed to fetch stats",v("error",A.value),console.error("Error fetching stats:",A.value),n.value&&(p.value={})}finally{n.value=!1,N.value=!1,v("loading",!1)}},_=()=>{m.value||t()};Z(m,D=>{B&&(clearInterval(B),B=null),D&&(t(),B=setInterval(t,3e3))},{immediate:!0}),Z(()=>P.containerId,D=>{D&&(n.value=!0,p.value={},t())},{immediate:!0});const y=D=>{const U=D>90?"#f56c6c":D>70?"#e6a23c":"#67c23a";return{width:`${D}%`,"background-color":U}};return H(()=>{t()}),fe(()=>{B&&clearInterval(B)}),(D,U)=>(S(),Q("div",ke,[o("div",we,[o("button",{onClick:_,disabled:N.value,class:"refresh-btn"},[e(k(w),{icon:"mdi:refresh",class:_e({spin:N.value})},null,8,["class"]),U[1]||(U[1]=o("span",null,"Refresh",-1))],8,Ce),o("label",Ve,[le(o("input",{type:"checkbox","onUpdate:modelValue":U[0]||(U[0]=h=>m.value=h),disabled:N.value},null,8,$e),[[ge,m.value]]),o("span",De,z(m.value?"Live":"Static"),1)])]),n.value?(S(),Q("div",he,[e(k(w),{icon:"mdi:loading",class:"spin"}),U[2]||(U[2]=o("span",null,"Loading...",-1))])):A.value?(S(),Q("div",Se,[e(k(w),{icon:"mdi:alert-circle"}),o("span",null,z(A.value),1)])):(S(),Q("div",Ie,[o("div",xe,[o("div",Ue,[e(k(w),{icon:"mdi:memory"}),U[3]||(U[3]=o("span",null,"Memory",-1))]),o("div",Fe,[o("span",Re,z(T.value.used||"N/A"),1),o("span",Ne,"/ "+z(T.value.total||"N/A"),1)]),o("div",Pe,[o("div",{class:"progress-bar",style:me(y(C.value))},null,4),o("span",Te,z(C.value.toFixed(0))+"%",1)])]),o("div",Le,[o("div",Ae,[e(k(w),{icon:"mdi:cpu-64-bit"}),U[4]||(U[4]=o("span",null,"CPU",-1))]),o("div",Be,[o("span",ze,z(p.value.CPUPerc||"N/A"),1)]),o("div",Ee,[o("div",{class:"progress-bar",style:me(y(u.value))},null,4),o("span",Me,z(u.value.toFixed(0))+"%",1)])]),o("div",Oe,[o("div",We,[e(k(w),{icon:"mdi:network"}),U[5]||(U[5]=o("span",null,"Network",-1))]),o("div",Qe,[o("div",qe,[e(k(w),{icon:"mdi:download"}),o("span",null,z(I.value.rx||"N/A"),1)]),o("div",Ke,[e(k(w),{icon:"mdi:upload"}),o("span",null,z(I.value.tx||"N/A"),1)])])]),o("div",je,[o("div",Ge,[e(k(w),{icon:"mdi:harddisk"}),U[6]||(U[6]=o("span",null,"Disk",-1))]),o("div",Ye,[o("div",Je,[e(k(w),{icon:"mdi:download"}),o("span",null,z(a.value.rx||"N/A"),1)]),o("div",He,[e(k(w),{icon:"mdi:upload"}),o("span",null,z(a.value.tx||"N/A"),1)])])])]))]))}},ce=J(Xe,[["__scopeId","data-v-13a6eaf6"]]),Ze={class:"docker-containers"},el={class:"header"},ll={key:1},tl={key:0},ol={key:1},al={class:"logs"},sl={__name:"DockerContainers",setup(G){const F=d([]),P=d(!1),v=d(""),p=d(!1),n=d(!1),N=d(""),A=d(""),m=d({}),B=d(null),T=d({}),I=ie("reloadKey"),a=async b=>{B.value=b.ID,T.value[b.ID]||await C(b.ID)},C=async b=>{try{const i=await L.get(`/services/docker/stats/container/${b}`);T.value[b]=i.data.stats}catch(i){$.error("Failed to fetch container stats"),console.error(i)}},u=(b,i,V)=>b?b.length>V?b.substring(i,V)+"...":b:"-",t=(b,i=",")=>b?b.split(i).map(V=>V.trim()).filter(V=>V):[],_=b=>b?.toLowerCase().includes("up"),y=b=>b?b.includes("Up")?"success":b.includes("Exited")?"danger":b.includes("Paused")?"warning":"info":"info",D=j(()=>(v.value?F.value.filter(i=>{const V=v.value.toLowerCase();return i.id?.toLowerCase().includes(V)||i.image?.toLowerCase().includes(V)||i.status?.toLowerCase().includes(V)}):F.value).map(i=>({ID:i.ID||i.id||"",image:i.Image||i.image||"",command:i.Command||i.command||"",status:i.Status||i.status||"",ports:i.Ports||i.ports||""}))),U=async()=>{try{P.value=!0;const b=await L.get("/services/docker/containers",{params:{all:!0}});F.value=Array.isArray(b.data?.containers)?b.data.containers:[]}catch(b){$.error("Failed to fetch containers"),console.error(b)}finally{P.value=!1}},h=async(b,i)=>{try{m.value[b]=i,await L.post(`/services/docker/container/${b}/${i}`),$.success(`Container ${i}ed successfully`),await U()}catch(V){$.error(`Failed to ${i} container`),console.error(V)}finally{m.value[b]=null}},g=async b=>{try{m.value[b]="delete";const i=await L.delete(`/services/docker/container/${b}`,{params:{removeVolumes:!0,removeImage:!0,force:!0}});await U(),$.success(i.data.message||"Container deleted successfully")}catch(i){const V=i.response?.data?.details||i.response?.data?.error||"Failed to delete container";throw $.error(V),console.error("Delete error:",i),i}finally{m.value[b]=null}},f=b=>{ae.confirm(`This will permanently delete container ${b.ID} with all associated resources. Continue?`,"Delete Confirmation",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",beforeClose:async(i,V,c)=>{if(i==="confirm"){V.confirmButtonLoading=!0;try{await g(b.ID),c()}catch{V.confirmButtonLoading=!1}}else c()}}).catch(()=>{})},M=async b=>{try{A.value=b;const i=await L.get(`/services/docker/container/logs/${b}`);N.value=i.data.logs,p.value=!0}catch(i){$.error("Failed to get container logs"),console.error(i)}},K=b=>{if(!b){$.warning("No container ID provided");return}A.value=b,n.value=!0};return Z(I,()=>{U()}),H(()=>{U()}),(b,i)=>{const V=r("el-icon"),c=r("el-input"),s=r("el-button"),O=r("el-table-column"),q=r("el-tooltip"),se=r("el-tag"),ne=r("el-button-group"),te=r("el-table"),ee=r("el-dialog"),re=oe("loading");return S(),Q("div",Ze,[o("div",el,[e(c,{modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=R=>v.value=R),placeholder:"Search containers...",clearable:"",style:{width:"300px"}},{prefix:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:magnify"})]),_:1})]),_:1},8,["modelValue"]),e(s,{type:"primary",onClick:U},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:refresh"})]),_:1}),i[5]||(i[5]=x(" Refresh "))]),_:1,__:[5]})]),le((S(),W(te,{data:D.value,onRowClick:a,style:{width:"100%"},stripe:""},{default:l(()=>[e(O,{type:"expand"},{default:l(({row:R})=>[e(ce,{containerId:R.ID},null,8,["containerId"])]),_:1}),e(O,{prop:"ID",label:"ID",width:"100"},{default:l(({row:R})=>[e(q,{content:R.ID,placement:"top"},{default:l(()=>[o("span",null,z(u(R.ID,0,12)),1)]),_:2},1032,["content"])]),_:1}),e(O,{prop:"image",label:"Image"},{default:l(({row:R})=>[x(z(R.image||"-"),1)]),_:1}),e(O,{prop:"command",label:"Command"},{default:l(({row:R})=>[R.command?(S(),W(q,{key:0,content:R.command,placement:"top"},{default:l(()=>[o("span",null,z(u(R.command,0,20)),1)]),_:2},1032,["content"])):(S(),Q("span",ll,"-"))]),_:1}),e(O,{prop:"status",label:"Status"},{default:l(({row:R})=>[e(se,{type:y(R.status)},{default:l(()=>[x(z(R.status||"-"),1)]),_:2},1032,["type"])]),_:1}),e(O,{prop:"ports",label:"Ports"},{default:l(({row:R})=>[R.ports?(S(),Q("div",tl,[(S(!0),Q(pe,null,ve(t(R.ports),(Y,E)=>(S(),W(se,{key:E,size:"small",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:l(()=>[x(z(Y),1)]),_:2},1024))),128))])):(S(),Q("span",ol,"-"))]),_:1}),e(O,{label:"Actions",width:"220"},{default:l(({row:R})=>[e(ne,null,{default:l(()=>[_(R.status)?(S(),W(s,{key:1,size:"small",type:"danger",onClick:Y=>h(R.ID,"stop")},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:stop"})]),_:1})]),_:2},1032,["onClick"])):(S(),W(s,{key:0,size:"small",type:"success",onClick:Y=>h(R.ID,"start")},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:play"})]),_:1})]),_:2},1032,["onClick"])),e(s,{size:"small",type:"warning",onClick:Y=>h(R.ID,"restart"),loading:m.value[R.ID]==="restart"},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:restart"})]),_:1})]),_:2},1032,["onClick","loading"]),e(s,{size:"small",type:"info",onClick:ue(Y=>K(R.ID),["stop"])},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:chart-box"})]),_:1})]),_:2},1032,["onClick"]),e(s,{size:"small",type:"primary",onClick:Y=>M(R.ID)},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:file-document"})]),_:1})]),_:2},1032,["onClick"]),e(s,{size:"small",type:"danger",plain:"",onClick:ue(Y=>f(R),["stop"])},{default:l(()=>[e(V,null,{default:l(()=>[e(k(w),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[re,P.value]]),e(ee,{modelValue:p.value,"onUpdate:modelValue":i[2]||(i[2]=R=>p.value=R),title:"Container Logs",width:"70%"},{footer:l(()=>[e(s,{onClick:i[1]||(i[1]=R=>p.value=!1)},{default:l(()=>i[6]||(i[6]=[x("Close")])),_:1,__:[6]})]),default:l(()=>[o("div",al,[o("pre",null,z(N.value),1)])]),_:1},8,["modelValue"]),e(ee,{modelValue:n.value,"onUpdate:modelValue":i[4]||(i[4]=R=>n.value=R),title:"Container Stats",width:"70%"},{footer:l(()=>[e(s,{onClick:i[3]||(i[3]=R=>n.value=!1)},{default:l(()=>i[7]||(i[7]=[x("Close")])),_:1,__:[7]})]),default:l(()=>[n.value?(S(),W(ce,{key:0,containerId:A.value},null,8,["containerId"])):X("",!0)]),_:1},8,["modelValue"])])}}},nl=J(sl,[["__scopeId","data-v-45bb470f"]]),rl={class:"docker-images"},il={class:"header"},dl={class:"actions"},ul={__name:"DockerImages",setup(G){const F=d([]),P=d(!1),v=d(""),p=d(!1),n=ie("reloadKey"),N=d({image:""}),A=j(()=>{if(!v.value)return F.value;const a=v.value.toLowerCase();return F.value.filter(C=>C.Repository.toLowerCase().includes(a)||C.Tag.toLowerCase().includes(a)||C.ImageID.toLowerCase().includes(a))}),m=async()=>{try{P.value=!0;const a=await L.get("/services/docker/images");F.value=a.data.images}catch(a){$.error("Failed to fetch images"),console.error(a)}finally{P.value=!1}},B=async()=>{try{if(!N.value.image){$.warning("Please enter an image name");return}P.value=!0,p.value=!1;const a=await L.post("/services/docker/images/pull",{image:N.value.image});$.success(a.data.message),await m()}catch(a){$.error("Failed to pull image"),console.error(a)}finally{P.value=!1,N.value.image=""}},T=async a=>{try{await ae.confirm(`This will permanently delete the image ${a.Repository}:${a.Tag}. Continue?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await L.delete("/services/docker/images/remove",{params:{image:`${a.Repository}:${a.Tag}`}}),$.success("Image deleted successfully"),await m()}catch(C){C!=="cancel"&&($.error("Failed to delete image"),console.error(C))}},I=async a=>{try{await L.post("/services/docker/containers/create",{image:a}),$.success("Container created successfully")}catch(C){$.error("Failed to create container"),console.error(C)}};return Z(n,()=>{m()}),H(()=>{m()}),(a,C)=>{const u=r("el-input"),t=r("el-button"),_=r("el-table-column"),y=r("el-button-group"),D=r("el-table"),U=r("el-form-item"),h=r("el-form"),g=r("el-dialog"),f=oe("loading");return S(),Q("div",rl,[o("div",il,[e(u,{modelValue:v.value,"onUpdate:modelValue":C[0]||(C[0]=M=>v.value=M),placeholder:"Search images...",clearable:"",style:{width:"300px"}},{prefix:l(()=>[e(k(w),{icon:"mdi:magnify"})]),_:1},8,["modelValue"]),o("div",dl,[e(t,{type:"primary",onClick:m},{default:l(()=>[e(k(w),{icon:"mdi:refresh",class:"icon"}),C[5]||(C[5]=x(" Refresh "))]),_:1,__:[5]}),e(t,{type:"success",onClick:C[1]||(C[1]=M=>p.value=!0)},{default:l(()=>[e(k(w),{icon:"mdi:download",class:"icon"}),C[6]||(C[6]=x(" Pull Image "))]),_:1,__:[6]})])]),le((S(),W(D,{data:A.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(_,{prop:"Repository",label:"Repository"}),e(_,{prop:"Tag",label:"Tag",width:"120"}),e(_,{prop:"ImageID",label:"Image ID",width:"200"}),e(_,{prop:"CreatedSince",label:"Created",width:"120"}),e(_,{prop:"Size",label:"Size",width:"120"}),e(_,{label:"Actions",width:"150"},{default:l(({row:M})=>[e(y,null,{default:l(()=>[e(t,{size:"small",type:"danger",onClick:K=>T(M)},{default:l(()=>[e(k(w),{icon:"mdi:delete"})]),_:2},1032,["onClick"]),e(t,{size:"small",type:"primary",onClick:K=>I(M.Repository)},{default:l(()=>[e(k(w),{icon:"mdi:play"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[f,P.value]]),e(g,{modelValue:p.value,"onUpdate:modelValue":C[4]||(C[4]=M=>p.value=M),title:"Pull Image"},{footer:l(()=>[e(t,{onClick:C[3]||(C[3]=M=>p.value=!1)},{default:l(()=>C[7]||(C[7]=[x("Cancel")])),_:1,__:[7]}),e(t,{type:"primary",onClick:B},{default:l(()=>C[8]||(C[8]=[x("Pull")])),_:1,__:[8]})]),default:l(()=>[e(h,{model:N.value,"label-width":"120px"},{default:l(()=>[e(U,{label:"Image Name"},{default:l(()=>[e(u,{modelValue:N.value.image,"onUpdate:modelValue":C[2]||(C[2]=M=>N.value.image=M),placeholder:"e.g. nginx:latest"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},cl=J(ul,[["__scopeId","data-v-9abc7ff0"]]),ml={class:"docker-networks"},pl={class:"header"},vl={class:"actions"},fl={class:"inspect-data"},_l={__name:"DockerNetworks",setup(G){const F=d([]),P=d(!1),v=d(""),p=d(!1),n=d(!1),N=d(""),A=ie("reloadKey"),m=d({name:"",driver:"bridge",attachable:!1}),B=j(()=>{if(!v.value)return F.value;const u=v.value.toLowerCase();return F.value.filter(t=>t.Name.toLowerCase().includes(u)||t.ID.toLowerCase().includes(u))}),T=async()=>{try{P.value=!0;const u=await L.get("/services/docker/networks");F.value=u.data.networks}catch(u){$.error("Failed to fetch networks"),console.error(u)}finally{P.value=!1}},I=async()=>{try{await L.post("/services/docker/networks",m.value),$.success("Network created successfully"),p.value=!1,m.value={name:"",driver:"bridge",attachable:!1},await T()}catch(u){$.error("Failed to create network"),console.error(u)}},a=async(u,t)=>{try{await ae.confirm(`Delete network "${t}" (${u})? This action cannot be undone.`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await L.delete(`/services/docker/networks/${u}`),$.success("Network deleted successfully"),await T()}catch(_){_!=="cancel"&&($.error("Failed to delete network"),console.error(_))}},C=async u=>{try{const t=await L.get(`/services/docker/networks/${u}/inspect`);N.value=JSON.stringify(t.data,null,2),n.value=!0}catch(t){$.error("Failed to inspect network"),console.error(t)}};return Z(A,()=>{T()}),H(()=>{T()}),(u,t)=>{const _=r("el-input"),y=r("el-button"),D=r("el-table-column"),U=r("el-button-group"),h=r("el-table"),g=r("el-form-item"),f=r("el-option"),M=r("el-select"),K=r("el-switch"),b=r("el-form"),i=r("el-dialog"),V=oe("loading");return S(),Q("div",ml,[o("div",pl,[e(_,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=c=>v.value=c),placeholder:"Search networks...",clearable:"",style:{width:"300px"}},{prefix:l(()=>[e(k(w),{icon:"mdi:magnify"})]),_:1},8,["modelValue"]),o("div",vl,[e(y,{type:"primary",onClick:T},{default:l(()=>[e(k(w),{icon:"mdi:refresh",class:"icon"}),t[9]||(t[9]=x(" Refresh "))]),_:1,__:[9]}),e(y,{type:"success",onClick:t[1]||(t[1]=c=>p.value=!0)},{default:l(()=>[e(k(w),{icon:"mdi:plus",class:"icon"}),t[10]||(t[10]=x(" Create Network "))]),_:1,__:[10]})])]),le((S(),W(h,{data:B.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(D,{prop:"ID",label:"ID",width:"100"}),e(D,{prop:"Name",label:"Name"}),e(D,{prop:"Driver",label:"Driver",width:"120"}),e(D,{prop:"Scope",label:"Scope",width:"120"}),e(D,{label:"Actions",width:"150"},{default:l(({row:c})=>[e(U,null,{default:l(()=>[e(y,{size:"small",type:"danger",onClick:s=>a(c.ID,c.Name)},{default:l(()=>[e(k(w),{icon:"mdi:delete"})]),_:2},1032,["onClick"]),e(y,{size:"small",type:"info",onClick:s=>C(c.ID)},{default:l(()=>[e(k(w),{icon:"mdi:information"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[V,P.value]]),e(i,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=c=>p.value=c),title:"Create Network",width:"40%"},{footer:l(()=>[e(y,{onClick:t[5]||(t[5]=c=>p.value=!1)},{default:l(()=>t[11]||(t[11]=[x("Cancel")])),_:1,__:[11]}),e(y,{type:"primary",onClick:I},{default:l(()=>t[12]||(t[12]=[x("Create")])),_:1,__:[12]})]),default:l(()=>[e(b,{model:m.value,"label-width":"120px"},{default:l(()=>[e(g,{label:"Network Name"},{default:l(()=>[e(_,{modelValue:m.value.name,"onUpdate:modelValue":t[2]||(t[2]=c=>m.value.name=c)},null,8,["modelValue"])]),_:1}),e(g,{label:"Driver"},{default:l(()=>[e(M,{modelValue:m.value.driver,"onUpdate:modelValue":t[3]||(t[3]=c=>m.value.driver=c)},{default:l(()=>[e(f,{label:"bridge",value:"bridge"}),e(f,{label:"host",value:"host"}),e(f,{label:"overlay",value:"overlay"}),e(f,{label:"macvlan",value:"macvlan"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"Attachable"},{default:l(()=>[e(K,{modelValue:m.value.attachable,"onUpdate:modelValue":t[4]||(t[4]=c=>m.value.attachable=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(i,{modelValue:n.value,"onUpdate:modelValue":t[8]||(t[8]=c=>n.value=c),title:"Network Details",width:"60%"},{footer:l(()=>[e(y,{onClick:t[7]||(t[7]=c=>n.value=!1)},{default:l(()=>t[13]||(t[13]=[x("Close")])),_:1,__:[13]})]),default:l(()=>[o("pre",fl,z(N.value),1)]),_:1},8,["modelValue"])])}}},gl=J(_l,[["__scopeId","data-v-1994f40d"]]),yl={class:"docker-volumes"},bl={class:"header"},kl={class:"actions"},wl={class:"inspect-data"},Cl={__name:"DockerVolumes",setup(G){const F=d([]),P=d(!1),v=d(""),p=d(!1),n=d(!1),N=d(""),A=ie("reloadKey"),m=d({name:"",driver:"local",options:{server:"",path:""}}),B=j(()=>{if(!v.value)return F.value;const u=v.value.toLowerCase();return F.value.filter(t=>t.Name.toLowerCase().includes(u)||t.Driver.toLowerCase().includes(u))}),T=async()=>{try{P.value=!0;const u=await L.get("/services/docker/volumes");F.value=u.data.volumes}catch(u){$.error("Failed to fetch volumes"),console.error(u)}finally{P.value=!1}},I=async()=>{try{const u={name:m.value.name,driver:m.value.driver};m.value.driver==="nfs"&&(u.driver_opts={type:"nfs",o:`addr=${m.value.options.server},nfsvers=4`,device:`:${m.value.options.path}`}),await L.post("/services/docker/volumes",u),$.success("Volume created successfully"),p.value=!1,m.value={name:"",driver:"local",options:{server:"",path:""}},await T()}catch(u){$.error("Failed to create volume"),console.error(u)}},a=async u=>{try{await ae.confirm(`Delete volume "${u}"? This action cannot be undone.`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await L.delete(`/services/docker/volumes/${u}`),$.success("Volume deleted successfully"),await T()}catch(t){t!=="cancel"&&($.error("Failed to delete volume"),console.error(t))}},C=async u=>{try{const t=await L.get(`/services/docker/volumes/${u}/inspect`);N.value=JSON.stringify(t.data,null,2),n.value=!0}catch(t){$.error("Failed to inspect volume"),console.error(t)}};return Z(A,()=>{T()}),H(()=>{T()}),(u,t)=>{const _=r("el-input"),y=r("el-button"),D=r("el-table-column"),U=r("el-button-group"),h=r("el-table"),g=r("el-form-item"),f=r("el-option"),M=r("el-select"),K=r("el-form"),b=r("el-dialog"),i=oe("loading");return S(),Q("div",yl,[o("div",bl,[e(_,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=V=>v.value=V),placeholder:"Search volumes...",clearable:"",style:{width:"300px"}},{prefix:l(()=>[e(k(w),{icon:"mdi:magnify"})]),_:1},8,["modelValue"]),o("div",kl,[e(y,{type:"primary",onClick:T},{default:l(()=>[e(k(w),{icon:"mdi:refresh",class:"icon"}),t[10]||(t[10]=x(" Refresh "))]),_:1,__:[10]}),e(y,{type:"success",onClick:t[1]||(t[1]=V=>p.value=!0)},{default:l(()=>[e(k(w),{icon:"mdi:plus",class:"icon"}),t[11]||(t[11]=x(" Create Volume "))]),_:1,__:[11]})])]),le((S(),W(h,{data:B.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(D,{prop:"Name",label:"Name"}),e(D,{prop:"Driver",label:"Driver",width:"120"}),e(D,{prop:"Mountpoint",label:"Mount Point"}),e(D,{label:"Actions",width:"150"},{default:l(({row:V})=>[e(U,null,{default:l(()=>[e(y,{size:"small",type:"danger",onClick:c=>a(V.Name)},{default:l(()=>[e(k(w),{icon:"mdi:delete"})]),_:2},1032,["onClick"]),e(y,{size:"small",type:"info",onClick:c=>C(V.Name)},{default:l(()=>[e(k(w),{icon:"mdi:information"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[i,P.value]]),e(b,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=V=>p.value=V),title:"Create Volume",width:"40%"},{footer:l(()=>[e(y,{onClick:t[6]||(t[6]=V=>p.value=!1)},{default:l(()=>t[12]||(t[12]=[x("Cancel")])),_:1,__:[12]}),e(y,{type:"primary",onClick:I},{default:l(()=>t[13]||(t[13]=[x("Create")])),_:1,__:[13]})]),default:l(()=>[e(K,{model:m.value,"label-width":"120px"},{default:l(()=>[e(g,{label:"Volume Name"},{default:l(()=>[e(_,{modelValue:m.value.name,"onUpdate:modelValue":t[2]||(t[2]=V=>m.value.name=V)},null,8,["modelValue"])]),_:1}),e(g,{label:"Driver"},{default:l(()=>[e(M,{modelValue:m.value.driver,"onUpdate:modelValue":t[3]||(t[3]=V=>m.value.driver=V)},{default:l(()=>[e(f,{label:"local",value:"local"}),e(f,{label:"nfs",value:"nfs"})]),_:1},8,["modelValue"])]),_:1}),m.value.driver==="nfs"?(S(),W(g,{key:0,label:"NFS Options"},{default:l(()=>[e(_,{modelValue:m.value.options.server,"onUpdate:modelValue":t[4]||(t[4]=V=>m.value.options.server=V),placeholder:"Server"},null,8,["modelValue"]),e(_,{modelValue:m.value.options.path,"onUpdate:modelValue":t[5]||(t[5]=V=>m.value.options.path=V),placeholder:"Path",style:{"margin-top":"10px"}},null,8,["modelValue"])]),_:1})):X("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(b,{modelValue:n.value,"onUpdate:modelValue":t[9]||(t[9]=V=>n.value=V),title:"Volume Details",width:"60%"},{footer:l(()=>[e(y,{onClick:t[8]||(t[8]=V=>n.value=!1)},{default:l(()=>t[14]||(t[14]=[x("Close")])),_:1,__:[14]})]),default:l(()=>[o("pre",wl,z(N.value),1)]),_:1},8,["modelValue"])])}}},Vl=J(Cl,[["__scopeId","data-v-822d0a0c"]]),$l={class:"docker-compose"},Dl={class:"header"},hl={class:"deploy-log"},Sl={class:"template-preview"},Il={__name:"DockerCompose",setup(G){const F=d([]),P=d(!1),v=d(!1),p=d(!1),n=d(!1),N=d(""),A=d(!1),m=d(!1),B=d(!1),T=d([]),I=d(""),a=d(null),C=[{name:"Nginx Web Server",description:"Basic Nginx web server with port 80 exposed",content:`version: '3'
services:
  web:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./html:/usr/share/nginx/html
    restart: unless-stopped`},{name:"WordPress with MySQL",description:"Complete WordPress setup with MySQL database",content:`version: '3'
services:
  db:
    image: mysql:5.7
    volumes:
      - db_data:/var/lib/mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: example_root_password
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: example_password

  wordpress:
    depends_on:
      - db
    image: wordpress:latest
    ports:
      - "8000:80"
    restart: always
    environment:
      WORDPRESS_DB_HOST: db:3306
      WORDPRESS_DB_USER: wordpress
      WORDPRESS_DB_PASSWORD: example_password
      WORDPRESS_DB_NAME: wordpress
volumes:
  db_data: {}`},{name:"PostgreSQL",description:"PostgreSQL database with persistent storage",content:`version: '3'
services:
  postgres:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: example_password
      POSTGRES_USER: example_user
      POSTGRES_DB: example_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
volumes:
  postgres_data: {}`}],u=d({filename:"docker-compose.yml",content:""}),t=d({filename:"",content:""}),_=async()=>{try{P.value=!0;const c=await L.get("/services/docker/compose");F.value=c.data.files.map(s=>({name:s,size:"N/A",modified:"N/A"}))}catch(c){$.error("Failed to fetch compose files"),console.error(c)}finally{P.value=!1}},y=async()=>{try{await D()}catch(c){c!=="cancel"&&console.error("Validation failed:",c)}},D=async()=>{try{if(!u.value.filename){$.warning("Please specify a file name");return}if(!u.value.content){$.warning("Please provide compose file content");return}const c=u.value.filename.endsWith(".yml")||u.value.filename.endsWith(".yaml")?u.value.filename:`${u.value.filename}.yml`,s=await L.post("/services/docker/compose_add",{filename:c,content:u.value.content});$.success(s.data.message||"Compose file created successfully"),v.value=!1,u.value={filename:"docker-compose.yml",content:""},await _()}catch(c){const s=c.response?.data?.message||c.response?.data?.error||"Failed to create compose file";$.error(s),console.error("Error details:",c)}},U=async c=>{try{const s=await L.get(`/services/docker/compose/${c}`);t.value={filename:c,content:s.data.content},p.value=!0}catch(s){$.error("Failed to load compose file"),console.error(s)}},h=async()=>{try{await L.put(`/services/docker/compose/${t.value.filename}`,{content:t.value.content}),$.success("Compose file saved successfully"),p.value=!1,await _()}catch(c){$.error("Failed to save compose file"),console.error(c)}},g=async c=>{try{await ae.confirm("This will permanently delete the compose file. Continue?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await L.delete(`/services/docker/compose/${c}`),$.success("Compose file deleted successfully"),await _()}catch(s){s!=="cancel"&&($.error("Failed to delete compose file"),console.error(s))}},f=async c=>{try{n.value=!0,N.value=`Starting deployment...
`;const s=await L.post("/services/docker/compose/deploy",{file:c});N.value+=s.data.output,$.success("Compose file deployed successfully")}catch(s){N.value+=s.response?.data?.details||s.message,$.error("Failed to deploy compose file"),console.error(s)}},M=async()=>{try{const c=await L.get("https://raw.githubusercontent.com/gekomod/docker-templates/main/contents/templates.json",{headers:{Accept:"application/vnd.github.v3.raw"}});T.value=c.data.templates||C}catch(c){console.log("Using default templates due to error:",c),T.value=C}},K=c=>{a.value=c,I.value=c.content,B.value=!0},b=()=>{v.value=!0,B.value=!1,m.value=!1,u.value={filename:`${a.value.name.toLowerCase().replace(/ /g,"-")}.yml`,content:a.value.content}},i=c=>{a.value=c,u.value={filename:`${c.name.toLowerCase().replace(/ /g,"-")}.yml`,content:c.content},m.value=!1,v.value=!0},V=async()=>{m.value=!0,M()};return H(()=>{_()}),(c,s)=>{const O=r("el-button"),q=r("el-table-column"),se=r("el-button-group"),ne=r("el-table"),te=r("el-input"),ee=r("el-form-item"),re=r("el-form"),R=r("el-dialog"),Y=oe("loading");return S(),Q("div",$l,[o("div",Dl,[e(O,{type:"primary",onClick:_},{default:l(()=>[e(k(w),{icon:"mdi:refresh",class:"icon"}),s[13]||(s[13]=x(" Refresh "))]),_:1,__:[13]}),e(O,{type:"success",onClick:s[0]||(s[0]=E=>v.value=!0)},{default:l(()=>[e(k(w),{icon:"mdi:plus",class:"icon"}),s[14]||(s[14]=x(" New Compose "))]),_:1,__:[14]}),e(O,{type:"info",onClick:V},{default:l(()=>[e(k(w),{icon:"mdi:file-download",class:"icon"}),s[15]||(s[15]=x(" Add from Templates "))]),_:1,__:[15]})]),le((S(),W(ne,{data:F.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(q,{prop:"name",label:"File Name"}),e(q,{prop:"size",label:"Size",width:"120"}),e(q,{prop:"modified",label:"Modified",width:"180"}),e(q,{label:"Actions",width:"200"},{default:l(({row:E})=>[e(se,null,{default:l(()=>[e(O,{size:"small",type:"primary",onClick:de=>f(E.name)},{default:l(()=>[e(k(w),{icon:"mdi:rocket-launch"})]),_:2},1032,["onClick"]),e(O,{size:"small",type:"info",onClick:de=>U(E.name)},{default:l(()=>[e(k(w),{icon:"mdi:pencil"})]),_:2},1032,["onClick"]),e(O,{size:"small",type:"danger",onClick:de=>g(E.name)},{default:l(()=>[e(k(w),{icon:"mdi:delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Y,P.value]]),e(R,{modelValue:v.value,"onUpdate:modelValue":s[4]||(s[4]=E=>v.value=E),title:"Create Compose File",width:"80%"},{footer:l(()=>[e(O,{onClick:s[3]||(s[3]=E=>v.value=!1)},{default:l(()=>s[16]||(s[16]=[x("Cancel")])),_:1,__:[16]}),e(O,{type:"primary",onClick:y,loading:A.value},{default:l(()=>s[17]||(s[17]=[x(" Save ")])),_:1,__:[17]},8,["loading"])]),default:l(()=>[e(re,{model:u.value,ref:"composeFormRef"},{default:l(()=>[e(ee,{label:"File Name",prop:"filename",rules:[{required:!0,message:"Please input file name",trigger:"blur"},{pattern:/\.(yml|yaml)$/,message:"File must end with .yml or .yaml"}]},{default:l(()=>[e(te,{modelValue:u.value.filename,"onUpdate:modelValue":s[1]||(s[1]=E=>u.value.filename=E),placeholder:"docker-compose.yml"},null,8,["modelValue"])]),_:1}),e(ee,{label:"Content",prop:"content",rules:[{required:!0,message:"Please input compose content",trigger:"blur"}]},{default:l(()=>[e(te,{modelValue:u.value.content,"onUpdate:modelValue":s[2]||(s[2]=E=>u.value.content=E),type:"textarea",rows:15,placeholder:`version: '3'
services:
  web:
    image: nginx
    ports:
      - '80:80'`},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(R,{modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=E=>p.value=E),title:"Edit Compose File",width:"80%"},{footer:l(()=>[e(O,{onClick:s[6]||(s[6]=E=>p.value=!1)},{default:l(()=>s[18]||(s[18]=[x("Cancel")])),_:1,__:[18]}),e(O,{type:"primary",onClick:h},{default:l(()=>s[19]||(s[19]=[x("Save")])),_:1,__:[19]})]),default:l(()=>[e(re,{model:t.value},{default:l(()=>[e(ee,null,{default:l(()=>[e(te,{modelValue:t.value.content,"onUpdate:modelValue":s[5]||(s[5]=E=>t.value.content=E),type:"textarea",rows:15},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(R,{modelValue:n.value,"onUpdate:modelValue":s[9]||(s[9]=E=>n.value=E),title:"Deploy Status",width:"60%"},{footer:l(()=>[e(O,{onClick:s[8]||(s[8]=E=>n.value=!1)},{default:l(()=>s[20]||(s[20]=[x("Close")])),_:1,__:[20]})]),default:l(()=>[o("pre",hl,z(N.value),1)]),_:1},8,["modelValue"]),e(R,{modelValue:m.value,"onUpdate:modelValue":s[10]||(s[10]=E=>m.value=E),title:"Add from Templates",width:"60%"},{default:l(()=>[e(ne,{data:T.value,style:{width:"100%"},onRowClick:i},{default:l(()=>[e(q,{prop:"name",label:"Template Name"}),e(q,{prop:"description",label:"Description"}),e(q,{label:"Actions",width:"120"},{default:l(({row:E})=>[e(O,{size:"small",type:"text",onClick:ue(de=>K(E),["stop"])},{default:l(()=>s[21]||(s[21]=[x(" Preview ")])),_:2,__:[21]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(R,{modelValue:B.value,"onUpdate:modelValue":s[12]||(s[12]=E=>B.value=E),title:"Template Preview",width:"80%"},{footer:l(()=>[e(O,{onClick:s[11]||(s[11]=E=>B.value=!1)},{default:l(()=>s[22]||(s[22]=[x("Cancel")])),_:1,__:[22]}),e(O,{type:"primary",onClick:b},{default:l(()=>s[23]||(s[23]=[x(" Use This Template ")])),_:1,__:[23]})]),default:l(()=>[o("pre",Sl,z(I.value),1)]),_:1},8,["modelValue"])])}}},xl=J(Il,[["__scopeId","data-v-6415155d"]]),Ul={key:0,class:"step-content"},Fl={key:1,class:"step-content"},Rl={class:"current-step"},Nl={class:"log-output"},Pl={key:2,class:"step-content"},Tl={__name:"DockerInstall",props:{visible:Boolean},emits:["update:visible","installed"],setup(G,{emit:F}){const P=G,v=F,p=d(0),n=d(0),N=d(""),A=d(""),m=d(""),B=d(""),T=d(!1),I=d(!1),a=async()=>{p.value=1,T.value=!0,B.value="",m.value="",I.value=!1;try{const _=await L.post("/services/docker/install");m.value=_.data.output,n.value=100,N.value="success",I.value=!0,p.value=2}catch(_){B.value=_.response?.data?.error||"Installation failed",m.value=_.response?.data?.details||_.message,N.value="exception",p.value=2}finally{T.value=!1}},C=()=>{p.value=0,n.value=0,N.value="",B.value=""},u=()=>{v("installed"),v("update:visible",!1)},t=_=>{if(T.value){$.warning("Installation in progress. Please wait or cancel the operation.");return}_(),v("update:visible",!1)};return(_,y)=>{const D=r("el-step"),U=r("el-steps"),h=r("el-progress"),g=r("el-button"),f=r("el-result"),M=r("el-dialog");return S(),W(M,{"model-value":P.visible,"onUpdate:modelValue":y[1]||(y[1]=K=>_.$emit("update:visible",K)),title:"Install Docker",width:"50%","before-close":t},{footer:l(()=>[p.value>0&&p.value<2&&!T.value?(S(),W(g,{key:0,onClick:y[0]||(y[0]=K=>p.value--)},{default:l(()=>y[5]||(y[5]=[x(" Back ")])),_:1,__:[5]})):X("",!0),p.value===0?(S(),W(g,{key:1,type:"primary",onClick:a,loading:T.value},{default:l(()=>y[6]||(y[6]=[x(" Begin Installation ")])),_:1,__:[6]},8,["loading"])):X("",!0)]),default:l(()=>[e(U,{active:p.value,"finish-status":"success","align-center":""},{default:l(()=>[e(D,{title:"Preparation"}),e(D,{title:"Installation"}),e(D,{title:"Completion"})]),_:1},8,["active"]),p.value===0?(S(),Q("div",Ul,y[2]||(y[2]=[o("h3",null,"System Requirements",-1),o("ul",null,[o("li",null,"Ubuntu 20.04/22.04 or Debian 10/11"),o("li",null,"64-bit architecture"),o("li",null,"Minimum 2GB RAM (4GB recommended)"),o("li",null,"At least 10GB free disk space")],-1)]))):p.value===1?(S(),Q("div",Fl,[e(h,{percentage:n.value,status:N.value},null,8,["percentage","status"]),o("div",Rl,[o("h4",null,z(A.value),1),o("pre",Nl,z(m.value),1)])])):(S(),Q("div",Pl,[I.value?(S(),W(f,{key:0,icon:"success",title:"Installation Complete"},{extra:l(()=>[e(g,{type:"primary",onClick:u},{default:l(()=>y[3]||(y[3]=[x(" Finish ")])),_:1,__:[3]})]),_:1})):(S(),W(f,{key:1,icon:"error",title:"Installation Failed","sub-title":B.value},{extra:l(()=>[e(g,{type:"primary",onClick:C},{default:l(()=>y[4]||(y[4]=[x(" Retry ")])),_:1,__:[4]})]),_:1},8,["sub-title"]))]))]),_:1},8,["model-value"])}}},Ll=J(Tl,[["__scopeId","data-v-62dac4d5"]]),Al={class:"modern-docker-settings"},Bl={class:"card-header"},zl={class:"header-title"},El={class:"header-actions"},Ml={class:"settings-grid"},Ol={class:"settings-column"},Wl={class:"settings-group"},Ql={class:"group-title"},ql={class:"form-items"},Kl={class:"settings-group"},jl={class:"group-title"},Gl={class:"form-items"},Yl={class:"settings-column"},Jl={class:"settings-group"},Hl={class:"group-title"},Xl={class:"switch-grid"},Zl={class:"settings-group"},et={class:"group-title"},lt={class:"form-items"},tt={class:"settings-column"},ot={class:"settings-group"},at={class:"group-title"},st={class:"form-items"},nt={class:"settings-group"},rt={class:"group-title"},it={class:"switch-grid"},dt={__name:"DockerSettings",props:{config:{type:Object,required:!0}},emits:["save"],setup(G,{emit:F}){const{t:P}=ye(),v=G,p=F,n=d({daemonPort:2375,hosts:["tcp://0.0.0.0:2375","unix:///var/run/docker.sock"],ipv6Enabled:!1,loggingDriver:"json-file",logLevel:"debug",maxConcurrentDownloads:3,maxConcurrentUploads:5,maxDownloadAttempts:10,dataRoot:"/var/lib/docker",containerd:"/run/containerd/containerd.sock",experimental:!1,debug:!0,liveRestore:!0,iptables:!1,ip6tables:!1}),N=d(!0),A=d(!1);d(null);const m=()=>{v.config&&(n.value={daemonPort:v.config.daemonPort||2375,hosts:v.config.hosts||["tcp://0.0.0.0:2375","unix:///var/run/docker.sock"],ipv6Enabled:v.config.ipv6Enabled||!1,loggingDriver:v.config.loggingDriver||"json-file",logLevel:v.config.logLevel||"debug",maxConcurrentDownloads:v.config.maxConcurrentDownloads||3,maxConcurrentUploads:v.config.maxConcurrentUploads||5,maxDownloadAttempts:v.config.maxDownloadAttempts||10,dataRoot:v.config.dataRoot||"/var/lib/docker",containerd:v.config.containerd||"/run/containerd/containerd.sock",experimental:v.config.experimental||!1,debug:v.config.debug!==void 0?v.config.debug:!0,liveRestore:v.config.liveRestore!==void 0?v.config.liveRestore:!0,iptables:v.config.iptables||!1,ip6tables:v.config.ip6tables||!1}),N.value=!1};Z(()=>v.config,I=>{I&&(n.value={...I})},{immediate:!0});const B=async()=>{try{A.value=!0,await p("save",n.value),$.success(P("docker.messages.saveSuccess"))}catch{$.error(P("docker.messages.saveError"))}finally{A.value=!1}},T=()=>{m()};return H(()=>{m()}),(I,a)=>{const C=r("el-icon"),u=r("el-button"),t=r("el-input-number"),_=r("el-form-item"),y=r("el-option"),D=r("el-select"),U=r("el-input"),h=r("el-switch"),g=r("el-card");return S(),Q("div",Al,[e(g,{class:"settings-card",shadow:"never"},{default:l(()=>[o("div",Bl,[o("div",zl,[e(C,{class:"header-icon"},{default:l(()=>[e(k(w),{icon:"mdi:docker"})]),_:1}),o("h2",null,z(I.$t("docker.settings.title")),1)]),o("div",El,[e(u,{type:"primary",onClick:B,loading:A.value,size:"large",round:""},{default:l(()=>[x(z(I.$t("common.save")),1)]),_:1},8,["loading"]),e(u,{onClick:T,size:"large",round:""},{default:l(()=>[x(z(I.$t("common.reset")),1)]),_:1})])]),o("div",Ml,[o("div",Ol,[o("div",Wl,[o("h3",Ql,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:connection"})]),_:1}),a[16]||(a[16]=o("span",null,"Connection",-1))]),o("div",ql,[e(_,{label:I.$t("docker.settings.daemonPort"),"label-position":"top"},{default:l(()=>[e(t,{modelValue:n.value.daemonPort,"onUpdate:modelValue":a[0]||(a[0]=f=>n.value.daemonPort=f),min:1,max:65535,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.hosts"),"label-position":"top"},{default:l(()=>[e(D,{modelValue:n.value.hosts,"onUpdate:modelValue":a[1]||(a[1]=f=>n.value.hosts=f),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:I.$t("docker.settings.hostsPlaceholder")},{default:l(()=>[(S(!0),Q(pe,null,ve(n.value.hosts,(f,M)=>(S(),W(y,{key:M,label:f,value:f},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])])]),o("div",Kl,[o("h3",jl,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:harddisk"})]),_:1}),a[17]||(a[17]=o("span",null,"Storage",-1))]),o("div",Gl,[e(_,{label:I.$t("docker.settings.dataRoot"),"label-position":"top"},{default:l(()=>[e(U,{modelValue:n.value.dataRoot,"onUpdate:modelValue":a[2]||(a[2]=f=>n.value.dataRoot=f),placeholder:"/var/lib/docker"},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.containerd"),"label-position":"top"},{default:l(()=>[e(U,{modelValue:n.value.containerd,"onUpdate:modelValue":a[3]||(a[3]=f=>n.value.containerd=f),placeholder:"/run/containerd/containerd.sock"},null,8,["modelValue"])]),_:1},8,["label"])])])]),o("div",Yl,[o("div",Jl,[o("h3",Hl,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:network"})]),_:1}),a[18]||(a[18]=o("span",null,"Network",-1))]),o("div",Xl,[e(_,{label:I.$t("docker.settings.ipv6Enabled"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.ipv6Enabled,"onUpdate:modelValue":a[4]||(a[4]=f=>n.value.ipv6Enabled=f)},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.ipTables"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.iptables,"onUpdate:modelValue":a[5]||(a[5]=f=>n.value.iptables=f)},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.ip6Tables"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.ip6tables,"onUpdate:modelValue":a[6]||(a[6]=f=>n.value.ip6tables=f)},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.ipForward"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.ipForward,"onUpdate:modelValue":a[7]||(a[7]=f=>n.value.ipForward=f)},null,8,["modelValue"])]),_:1},8,["label"])])]),o("div",Zl,[o("h3",et,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:download"})]),_:1}),a[19]||(a[19]=o("span",null,"Transfer",-1))]),o("div",lt,[e(_,{label:I.$t("docker.settings.maxConcurrentDownloads"),"label-position":"top"},{default:l(()=>[e(t,{modelValue:n.value.maxConcurrentDownloads,"onUpdate:modelValue":a[8]||(a[8]=f=>n.value.maxConcurrentDownloads=f),min:1,max:10,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.maxConcurrentUploads"),"label-position":"top"},{default:l(()=>[e(t,{modelValue:n.value.maxConcurrentUploads,"onUpdate:modelValue":a[9]||(a[9]=f=>n.value.maxConcurrentUploads=f),min:1,max:10,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.maxDownloadAttempts"),"label-position":"top"},{default:l(()=>[e(t,{modelValue:n.value.maxDownloadAttempts,"onUpdate:modelValue":a[10]||(a[10]=f=>n.value.maxDownloadAttempts=f),min:1,max:10,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"])])])]),o("div",tt,[o("div",ot,[o("h3",at,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:console-line"})]),_:1}),a[20]||(a[20]=o("span",null,"Logging",-1))]),o("div",st,[e(_,{label:I.$t("docker.settings.loggingDriver"),"label-position":"top"},{default:l(()=>[e(D,{modelValue:n.value.loggingDriver,"onUpdate:modelValue":a[11]||(a[11]=f=>n.value.loggingDriver=f)},{default:l(()=>[e(y,{label:"json-file",value:"json-file"}),e(y,{label:"syslog",value:"syslog"}),e(y,{label:"journald",value:"journald"}),e(y,{label:"gelf",value:"gelf"}),e(y,{label:"fluentd",value:"fluentd"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.logLevel"),"label-position":"top"},{default:l(()=>[e(D,{modelValue:n.value.logLevel,"onUpdate:modelValue":a[12]||(a[12]=f=>n.value.logLevel=f)},{default:l(()=>[e(y,{label:"debug",value:"debug"}),e(y,{label:"info",value:"info"}),e(y,{label:"warn",value:"warn"}),e(y,{label:"error",value:"error"}),e(y,{label:"fatal",value:"fatal"})]),_:1},8,["modelValue"])]),_:1},8,["label"])])]),o("div",nt,[o("h3",rt,[e(C,null,{default:l(()=>[e(k(w),{icon:"mdi:tune"})]),_:1}),a[21]||(a[21]=o("span",null,"Advanced",-1))]),o("div",it,[e(_,{label:I.$t("docker.settings.experimental"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.experimental,"onUpdate:modelValue":a[13]||(a[13]=f=>n.value.experimental=f)},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.debug"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.debug,"onUpdate:modelValue":a[14]||(a[14]=f=>n.value.debug=f)},null,8,["modelValue"])]),_:1},8,["label"]),e(_,{label:I.$t("docker.settings.liveRestore"),"label-position":"top"},{default:l(()=>[e(h,{modelValue:n.value.liveRestore,"onUpdate:modelValue":a[15]||(a[15]=f=>n.value.liveRestore=f)},null,8,["modelValue"])]),_:1},8,["label"])])])])])]),_:1})])}}},ut=J(dt,[["__scopeId","data-v-b1973969"]]),ct={class:"docker-dashboard"},mt={class:"card-header"},pt={key:0,class:"loading-spinner"},vt={key:1,class:"status-content"},ft={class:"status-info"},_t={class:"action-buttons"},gt={key:1},yt={__name:"DockerStatus",setup(G){const F=d({installed:!1,version:null,status:"unknown",info:""}),P=d(null),v=d(!0),p=d(!1),n=d("containers"),N=d(!1),A=d(!1),m=d(""),B=d(0);be("reloadKey",B);const T=j(()=>F.value.installed&&F.value.status==="active"?"success":"danger"),I=j(()=>F.value.installed?F.value.status==="active"?"mdi:check-circle":"mdi:alert-circle":"mdi:docker-off"),a=j(()=>F.value.installed?F.value.status==="active"?"Running":"Stopped":"Not Installed"),C=async()=>{try{v.value=!0;const h=await L.get("/services/docker/status");F.value=h.data}catch(h){$.error("Failed to fetch Docker status"),console.error(h)}finally{v.value=!1}},u=async h=>{try{p.value=!0,await L.post(`/services/docker/${h}`),$.success(`Docker service ${h}ed successfully`),await C(),B.value++,setTimeout(()=>{F.value.installed&&y()},1e3)}catch(g){$.error(`Failed to ${h} Docker service`),console.error(g)}finally{p.value=!1}},t=async h=>{try{await L.post(`/services/docker/container/${h}/restart`),$.success("Container restarted successfully")}catch(g){$.error("Failed to restart container"),console.error(g)}},_=h=>{m.value=h,A.value=!0},y=async()=>{try{const h=await L.get("/services/docker/config");P.value=h.data}catch(h){$.error("Failed to fetch Docker configuration"),console.error(h),P.value={daemonPort:2375,ipv6Enabled:!1,loggingDriver:"json-file",maxConcurrentDownloads:3,dataRoot:"/var/lib/docker"}}},D=async h=>{try{await L.post("/services/docker/config",h),await y(),$.success("Docker settings saved successfully")}catch(g){throw $.error("Failed to save Docker settings"),console.error(g),g}},U=()=>{C()};return H(async()=>{await C(),F.value.installed&&y()}),(h,g)=>{const f=r("el-icon"),M=r("el-tag"),K=r("el-descriptions-item"),b=r("el-descriptions"),i=r("el-button"),V=r("el-card"),c=r("el-tab-pane"),s=r("el-tabs"),O=r("el-dialog");return S(),Q("div",ct,[e(V,{shadow:"hover",class:"status-card"},{header:l(()=>[o("div",mt,[e(f,{size:"24",class:"docker-icon"},{default:l(()=>[e(k(w),{icon:"mdi:docker"})]),_:1}),g[7]||(g[7]=o("span",null,"Docker Engine",-1))])]),default:l(()=>[v.value?(S(),Q("div",pt,[e(f,{size:32,class:"is-loading"},{default:l(()=>[e(k(w),{icon:"mdi:loading"})]),_:1})])):(S(),Q("div",vt,[o("div",ft,[e(b,{column:1,border:""},{default:l(()=>[e(K,{label:"Status"},{default:l(()=>[e(M,{type:T.value},{default:l(()=>[e(f,{size:16},{default:l(()=>[e(k(w),{icon:I.value},null,8,["icon"])]),_:1}),x(" "+z(a.value),1)]),_:1},8,["type"])]),_:1}),e(K,{label:"Version"},{default:l(()=>[x(z(F.value.version||"unknown"),1)]),_:1}),e(K,{label:"Info"},{default:l(()=>[x(z(F.value.info),1)]),_:1})]),_:1})]),o("div",_t,[F.value.status!=="active"?(S(),W(i,{key:0,type:"success",onClick:g[0]||(g[0]=q=>u("start")),loading:p.value,plain:"",round:""},{icon:l(()=>[e(f,null,{default:l(()=>[e(k(w),{icon:"mdi:play"})]),_:1})]),default:l(()=>[g[8]||(g[8]=x(" Start "))]),_:1,__:[8]},8,["loading"])):(S(),W(i,{key:1,type:"danger",onClick:g[1]||(g[1]=q=>u("stop")),loading:p.value,plain:"",round:""},{icon:l(()=>[e(f,null,{default:l(()=>[e(k(w),{icon:"mdi:stop"})]),_:1})]),default:l(()=>[g[9]||(g[9]=x(" Stop "))]),_:1,__:[9]},8,["loading"])),e(i,{type:"warning",onClick:g[2]||(g[2]=q=>u("restart")),loading:p.value,plain:"",round:""},{icon:l(()=>[e(f,null,{default:l(()=>[e(k(w),{icon:"mdi:restart"})]),_:1})]),default:l(()=>[g[10]||(g[10]=x(" Restart "))]),_:1,__:[10]},8,["loading"]),F.value.installed?X("",!0):(S(),W(i,{key:2,type:"primary",onClick:g[3]||(g[3]=q=>N.value=!0),plain:"",round:""},{icon:l(()=>[e(f,null,{default:l(()=>[e(k(w),{icon:"mdi:download"})]),_:1})]),default:l(()=>[g[11]||(g[11]=x(" Install "))]),_:1,__:[11]}))])]))]),_:1}),F.value.installed?(S(),W(s,{key:0,modelValue:n.value,"onUpdate:modelValue":g[4]||(g[4]=q=>n.value=q),class:"docker-tabs"},{default:l(()=>[e(c,{label:"Containers",name:"containers"},{default:l(()=>[e(nl,{onRestartContainer:t,onShowStats:_})]),_:1}),e(c,{label:"Images",name:"images"},{default:l(()=>[e(cl)]),_:1}),e(c,{label:"Networks",name:"networks"},{default:l(()=>[e(gl)]),_:1}),e(c,{label:"Volumes",name:"volumes"},{default:l(()=>[e(Vl)]),_:1}),e(c,{label:"Compose",name:"compose"},{default:l(()=>[e(xl)]),_:1}),e(c,{label:"Settings",name:"settings"},{default:l(()=>[P.value?(S(),W(ut,{key:0,config:P.value,onSave:D},null,8,["config"])):(S(),Q("div",gt,"Loading settings..."))]),_:1})]),_:1},8,["modelValue"])):X("",!0),e(Ll,{visible:N.value,"onUpdate:visible":g[5]||(g[5]=q=>N.value=q),onInstalled:U},null,8,["visible"]),e(O,{modelValue:A.value,"onUpdate:modelValue":g[6]||(g[6]=q=>A.value=q),title:"Container Stats",width:"70%"},{default:l(()=>[A.value?(S(),W(ce,{key:0,"container-id":m.value},null,8,["container-id"])):X("",!0)]),_:1},8,["modelValue"])])}}},kt=J(yt,[["__scopeId","data-v-d2f59fb9"]]);export{kt as default};
