import{_ as D,x as I,r as d,y,k,O as A,b as p,p as N,n as S,e as U,o as $,w as m,h as e,a as _,t as o,l,U as b,g as j}from"./index-DxMqavst.js";const F={class:"widget-header"},V={class:"widget-content"},z={class:"metrics"},E={class:"metric-row"},O={class:"metric-row"},W={class:"metric-row"},G={class:"metric-row"},H={name:"RamWidget",displayName:"Informacje Ram"},K=Object.assign(H,{setup(L){const{t:r}=I(),a=d({total:0,used:0,free:0,active:0,percentage:0}),B=[{color:"#67C23A",percentage:50},{color:"#E6A23C",percentage:75},{color:"#F56C6C",percentage:90}],h=d(""),v=d(!0),c=d(null);let f=null;const M=y(()=>c.value?"danger":a.value.percentage>90?"warning":"success"),x=y(()=>c.value?r("ram.status.error"):a.value.percentage>90?r("ram.status.critical"):a.value.percentage>75?r("ram.status.high"):r("ram.status.normal")),C=()=>`RAM: ${a.value.percentage}%`,i=(s,t=2)=>{if(s===0)return"0 Bytes";const n=1024,g=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,u)).toFixed(t))+" "+g[u]},w=async()=>{try{v.value=!0;const s=await fetch(`${window.location.protocol}//${window.location.hostname}:3000/api/ram`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();a.value={total:t.total,used:t.used,free:t.free,active:t.active,percentage:t.percentage},h.value=new Date().toLocaleTimeString(),c.value=null}catch(s){console.error("Błąd pobierania danych RAM:",s),c.value=s.message;const t=8*1024*1024*1024,n=Math.floor(Math.random()*6*1024*1024*1024);a.value={total:t,used:n,free:t-n,active:n,percentage:Math.round(n/t*100)}}finally{v.value=!1}};return k(()=>{w(),f=setInterval(w,5e3)}),A(()=>{f&&clearInterval(f)}),(s,t)=>{const n=p("el-icon"),g=p("el-tag"),u=p("el-progress"),R=p("el-card"),T=N("loading");return S(($(),U(R,{class:"widget-card"},{header:m(()=>[e("div",F,[_(n,null,{default:m(()=>[_(l(b))]),_:1}),e("span",null,o(l(r)("ram.title")),1),_(g,{size:"small",type:M.value},{default:m(()=>[j(o(x.value),1)]),_:1},8,["type"])])]),default:m(()=>[e("div",V,[_(u,{percentage:a.value.percentage,color:B,format:C},null,8,["percentage"]),e("div",z,[e("div",E,[e("span",null,o(l(r)("ram.used"))+":",1),e("span",null,o(i(a.value.used))+" / "+o(i(a.value.total)),1)]),e("div",O,[e("span",null,o(l(r)("ram.free"))+":",1),e("span",null,o(i(a.value.free)),1)]),e("div",W,[e("span",null,o(l(r)("ram.active"))+":",1),e("span",null,o(i(a.value.active)),1)]),e("div",G,[e("span",null,o(l(r)("ram.lastUpdate"))+":",1),e("span",null,o(h.value),1)])])])]),_:1})),[[T,v.value]])}}}),q=D(K,[["__scopeId","data-v-fb04fb50"]]);export{q as default};
