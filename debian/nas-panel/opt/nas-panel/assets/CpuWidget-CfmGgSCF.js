import{_ as D,x as F,r as c,y as v,k as S,O as $,b as u,p as k,n as B,e as N,o as U,w as d,h as e,a as i,t,l as r,S as j,g as V}from"./index-DxMqavst.js";const b={class:"widget-header"},A={class:"widget-content"},E={class:"metrics"},L={class:"metric-row"},O={class:"metric-row"},P={class:"metric-row"},W={class:"metric-row"},z={name:"CpuWidget",displayName:"Informacje o CPU"},H=Object.assign(z,{setup(q){const{t:a}=F(),o=c({usage:0,temperature:null,cores:0,load1:0,load5:0,load15:0}),h=[{color:"#67C23A",percentage:30},{color:"#E6A23C",percentage:70},{color:"#F56C6C",percentage:90}],_=c(a("common.loading")),p=c(!0),l=c(null);let m=null;const f=v(()=>l.value?"danger":o.value.usage>80?"warning":"success"),w=v(()=>l.value?a("common.error"):o.value.usage>80?a("cpu.status.highLoad"):a("cpu.status.normal")),C=()=>`${a("cpu.title")}: ${o.value.usage}%`,g=async()=>{try{p.value=!0;const s=await fetch(`${window.location.protocol}//${window.location.hostname}:3000/api/cpu`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();o.value={usage:n.usage,temperature:n.temperature,cores:n.cores||navigator.hardwareConcurrency||4,load1:n.load1,load5:n.load5,load15:n.load15},_.value=new Date().toLocaleTimeString(),l.value=null}catch(s){console.error(a("common.errorFetching"),s),l.value=s.message,o.value={usage:Math.min(100,Math.round(Math.random()*40+10)),temperature:Math.round(Math.random()*10+50),cores:navigator.hardwareConcurrency||4,load1:Math.random().toFixed(2),load5:Math.random().toFixed(2),load15:Math.random().toFixed(2)}}finally{p.value=!1}};return S(()=>{g(),m=setInterval(g,5e3)}),$(()=>{m&&clearInterval(m)}),(s,n)=>{const y=u("el-icon"),x=u("el-tag"),M=u("el-progress"),I=u("el-card"),T=k("loading");return B((U(),N(I,{class:"widget-card"},{header:d(()=>[e("div",b,[i(y,null,{default:d(()=>[i(r(j))]),_:1}),e("span",null,t(r(a)("cpu.title")),1),i(x,{size:"small",type:f.value},{default:d(()=>[V(t(w.value),1)]),_:1},8,["type"])])]),default:d(()=>[e("div",A,[i(M,{percentage:o.value.usage,color:h,format:C},null,8,["percentage"]),e("div",E,[e("div",L,[e("span",null,t(r(a)("cpu.usage"))+":",1),e("span",null,t(o.value.usage)+"%",1)]),e("div",O,[e("span",null,t(r(a)("cpu.temperature"))+":",1),e("span",null,t(o.value.temperature||r(a)("common.na"))+"Â°C",1)]),e("div",P,[e("span",null,t(r(a)("systemInfo.cores"))+":",1),e("span",null,t(o.value.cores),1)]),e("div",W,[e("span",null,t(r(a)("systemInfo.lastUpdate"))+":",1),e("span",null,t(_.value),1)])])])]),_:1})),[[T,p.value]])}}}),J=D(H,[["__scopeId","data-v-a0d6f4ae"]]);export{J as default};
